# Generated by Django 5.0.6 on 2024-08-21 13:24

from django.db import migrations
from .utilities.util import migrate_bulk_data, reverse_migrated_bulk_data

table_name_data = [
    {
        "Name": "TableName",
        "Type__description": "Setup Table",
        "Group__code": "cor",
        "Prefix": "TNM",
    },
    {
        "Name": "TableAttribute",
        "Type__description": "Setup Table",
        "Group__code": "cor",
        "Prefix": "TAT",
    },
    {
        "Name": "TableGroup",
        "Type__description": "Setup Table",
        "Group__code": "cor",
        "Prefix": "TGP",
    },
    {
        "Name": "TableRelationship",
        "Type__description": "Setup Table",
        "Group__code": "cor",
        "Prefix": "TRP",
    },
    {
        "Name": "TableType",
        "Type__description": "Lookup Table",
        "Group__code": "cor",
        "Prefix": "TTP",
    },
    {
        "Name": "AttributeType",
        "Type__description": "Lookup Table",
        "Group__code": "cor",
        "Prefix": "ATP",
    },
    {
        "Name": "KeyType",
        "Type__description": "Lookup Table",
        "Group__code": "cor",
        "Prefix": "KTP",
    },
]
table_attributes_data = [
    {
        "table_name__name": "TableName",
        "ATTRIB_NAME": "NAME",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": False,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "TABLE_NAME",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": False,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "ATTRIB_NAME",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": False,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "CONSTRAINT",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "DESC",
        "DATA_TYPE__description": "Textarea",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "POSITION",
        "DATA_TYPE__description": "Integer",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "IS_NULLABLE",
        "DATA_TYPE__description": "Boolean",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "char_max_length",
        "DATA_TYPE__description": "Integer",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "NUMERIC_PRECISION",
        "DATA_TYPE__description": "Integer",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "IS_IDENTITY",
        "DATA_TYPE__description": "Boolean",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "IDENTITY_GENERATION",
        "DATA_TYPE__description": "Integer",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "IDENTITY_START",
        "DATA_TYPE__description": "Integer",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "IDENTITY_INCREMENT",
        "DATA_TYPE__description": "Integer",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "COMMENT",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableAttribute",
        "ATTRIB_NAME": "ATTRIB_CODE",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableRelationship",
        "ATTRIB_NAME": "Attr1",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableRelationship",
        "ATTRIB_NAME": "Attr2",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableRelationship",
        "ATTRIB_NAME": "Attr3",
        "DATA_TYPE__description": "String",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": True,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
    },
    {
        "table_name__name": "TableRelationship",
        "ATTRIB_NAME": "ui_display",
        "DATA_TYPE__description": "Boolean",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": False,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
        "default_value": False,
    },
    {
        "table_name__name": "TableRelationship",
        "ATTRIB_NAME": "reverse_display",
        "DATA_TYPE__description": "Boolean",
        "CONSTRAINT": "",
        "DESC": "",
        "POSITION": "",
        "IS_NULLABLE": False,
        "char_max_length": "",
        "NUMERIC_PRECISION": "",
        "IS_IDENTITY": "",
        "IDENTITY_GENERATION": "",
        "IDENTITY_START": "",
        "IDENTITY_INCREMENT": "",
        "COMMENT": "",
        "default_value": False,
    },
]

table_type = [
    {"description": "Archive Table", "Code": "ARC"},
    {"description": "Audit Table", "Code": "AUD"},
    {"description": "Base Table", "Code": "BAS"},
    {"description": "Lookup Table", "Code": "LKP"},
    {"description": "Relationship Table", "Code": "REL"},
    {"description": "Setup Table", "Code": "SET"},
    {"description": "Temp Table", "Code": "TEMP"},
    {"description": "Config Table", "Code": "CFG"},
    {"description": "Operational Table", "Code": "OPT"},
]

attr_type = [
    {"description": "String", "Code": "STR"},
    {"description": "Textarea", "Code": "TXT"},
    {"description": "Integer", "Code": "INT"},
    {"description": "Double", "Code": "DBL"},
    {"description": "Float", "Code": "FLT"},
    {"description": "Date", "Code": "DAT"},
    {"description": "DateTime", "Code": "DTM"},
    {"description": "Boolean", "Code": "BOOL"},
    {"description": "JSON", "Code": "JSN"},
    {"description": "XML", "Code": "XML"},
    {"description": "BLOB", "Code": "BLB"},
    {"description": "UUID", "Code": "UUID"},
]

table_group = [
    {"description": "Core", "Code": "cor"},
]

key_types = [
    {"Code": "OTO", "description": "One-to-One"},
    {"Code": "FGN", "description": "Foreign"},
    {"Code": "MTM", "description": "Many-to-Many"},
]

table_relations_data = [
    {
        "Relation_Table_1__name": "TableAttribute",
        "Relation_Column_1__attrib_name": "DATA_TYPE",
        "Relation_Table_2__name": "AttributeType",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableAttribute",
        "Relation_Column_1__attrib_name": "TableName",
        "Relation_Table_2__name": "TableName",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableName",
        "Relation_Column_1__attrib_name": "TYPE",
        "Relation_Table_2__name": "TableType",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableName",
        "Relation_Column_1__attrib_name": "GROUP",
        "Relation_Table_2__name": "TableGroup",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableRelationship",
        "Relation_Column_1__attrib_name": "Relation_Table_1__name",
        "Relation_Table_2__name": "TableName",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableRelationship",
        "Relation_Column_1__attrib_name": "Relation_Column_1__attrib_name",
        "Relation_Table_2__name": "TableAttribute",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableRelationship",
        "Relation_Column_1__attrib_name": "Relation_Table_2__name",
        "Relation_Table_2__name": "TableName",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableRelationship",
        "Relation_Column_1__attrib_name": "Relation_Column_2__attrib_name",
        "Relation_Table_2__name": "TableAttribute",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
    {
        "Relation_Table_1__name": "TableRelationship",
        "Relation_Column_1__attrib_name": "Type",
        "Relation_Table_2__name": "KeyType",
        "Relation_Column_2__attrib_name": "",
        "Type__description": "Foreign",
        "Attr1": "",
        "Attr2": "",
        "Attr3": "",
        "ui_display": True,
        "reverse_display": True,
    },
]


def transform_this_data(data):
    return [{key.lower(): val for key, val in eac_rec.items()} for eac_rec in data]


def migrate_core_data(apps, schema_editor):
    migrate_bulk_data(apps, "core", "Tablegroup", transform_this_data(table_group))
    migrate_bulk_data(apps, "core", "Tabletype", transform_this_data(table_type))
    migrate_bulk_data(apps, "core", "Attributetype", transform_this_data(attr_type))
    migrate_bulk_data(apps, "core", "Keytype", transform_this_data(key_types))
    migrate_bulk_data(apps, "core", "Tablename", transform_this_data(table_name_data))
    for rel in table_relations_data:
        table_attributes_data.append(
            {
                "table_name__name": rel["Relation_Table_1__name"],
                "ATTRIB_NAME": rel["Relation_Column_1__attrib_name"],
                "DATA_TYPE__description": "UUID",
                "CONSTRAINT": True,
                "DESC": "",
                "POSITION": 0,
                "IS_NULLABLE": False,
                "char_max_length": "",
                "NUMERIC_PRECISION": "",
                "IS_IDENTITY": "",
                "IDENTITY_GENERATION": "",
                "IDENTITY_START": "",
                "IDENTITY_INCREMENT": "",
                "COMMENT": "",
            }
        )
    migrate_bulk_data(
        apps, "core", "Tableattribute", transform_this_data(table_attributes_data)
    )
    migrate_bulk_data(
        apps, "core", "Tablerelationship", transform_this_data(table_relations_data)
    )


def reverse_migrated_core_data(apps, schema_editor):
    reverse_migrated_bulk_data(
        apps, "core", "Tablerelationship", transform_this_data(table_relations_data)
    )
    reverse_migrated_bulk_data(
        apps, "core", "Tableattribute", transform_this_data(table_attributes_data)
    )
    reverse_migrated_bulk_data(
        apps, "core", "Tablename", transform_this_data(table_name_data)
    )
    reverse_migrated_bulk_data(apps, "core", "Keytype", transform_this_data(key_types))
    reverse_migrated_bulk_data(
        apps, "core", "Attributetype", transform_this_data(attr_type)
    )
    reverse_migrated_bulk_data(
        apps, "core", "Tabletype", transform_this_data(table_type)
    )
    reverse_migrated_bulk_data(
        apps, "core", "Tablegroup", transform_this_data(table_group)
    )


class Migration(migrations.Migration):

    dependencies = [
        ("core", "0002_initial"),
    ]

    operations = [
        migrations.RunPython(migrate_core_data, reverse_migrated_core_data),
    ]
